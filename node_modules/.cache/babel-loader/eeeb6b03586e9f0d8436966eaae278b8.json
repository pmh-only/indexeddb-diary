{"ast":null,"code":"/*\n * wysiwyg web editor\n *\n * suneditor.js\n * Copyright 2017 JiHong Lee.\n * MIT license.\n */\n'use strict';\n\n(function (global, factory) {\n  if (typeof module === 'object' && typeof module.exports === 'object') {\n    module.exports = global.document ? factory(global, true) : function (w) {\n      if (!w.document) {\n        throw new Error('SUNEDITOR_MODULES a window with a document');\n      }\n\n      return factory(w);\n    };\n  } else {\n    factory(global);\n  }\n})(typeof window !== 'undefined' ? window : this, function (window, noGlobal) {\n  var dialog = {\n    name: 'dialog',\n\n    /**\n     * @description Constructor\n     * @param {Object} core Core object \n     */\n    add: function add(core) {\n      var context = core.context;\n      context.dialog = {\n        kind: '',\n        updateModal: false,\n        _closeSignal: false\n      };\n      /** dialog */\n\n      var dialog_div = core.util.createElement('DIV');\n      dialog_div.className = 'se-dialog sun-editor-common';\n      var dialog_back = core.util.createElement('DIV');\n      dialog_back.className = 'se-dialog-back';\n      dialog_back.style.display = 'none';\n      var dialog_area = core.util.createElement('DIV');\n      dialog_area.className = 'se-dialog-inner';\n      dialog_area.style.display = 'none';\n      dialog_div.appendChild(dialog_back);\n      dialog_div.appendChild(dialog_area);\n      context.dialog.modalArea = dialog_div;\n      context.dialog.back = dialog_back;\n      context.dialog.modal = dialog_area;\n      /** add event listeners */\n\n      context.dialog.modal.addEventListener('mousedown', this._onMouseDown_dialog.bind(core));\n      context.dialog.modal.addEventListener('click', this._onClick_dialog.bind(core));\n      /** append html */\n\n      context.element.relative.appendChild(dialog_div);\n      /** empty memory */\n\n      dialog_div = null, dialog_back = null, dialog_area = null;\n    },\n\n    /**\n     * @description Event to control the behavior of closing the dialog\n     * @param {MouseEvent} e Event object\n     * @private\n     */\n    _onMouseDown_dialog: function _onMouseDown_dialog(e) {\n      if (/se-dialog-inner/.test(e.target.className)) {\n        this.context.dialog._closeSignal = true;\n      } else {\n        this.context.dialog._closeSignal = false;\n      }\n    },\n\n    /**\n     * @description Event to close the window when the outside area of the dialog or close button is click\n     * @param {MouseEvent} e Event object\n     * @private\n     */\n    _onClick_dialog: function _onClick_dialog(e) {\n      if (/close/.test(e.target.getAttribute('data-command')) || this.context.dialog._closeSignal) {\n        this.plugins.dialog.close.call(this);\n      }\n    },\n\n    /**\n     * @description Open a Dialog plugin\n     * @param {String} kind Dialog plugin name\n     * @param {Boolean} update Whether it will open for update ('image' === this.currentControllerName)\n     */\n    open: function open(kind, update) {\n      if (this.modalForm) return false;\n\n      if (this.plugins.dialog._bindClose) {\n        this._d.removeEventListener('keydown', this.plugins.dialog._bindClose);\n\n        this.plugins.dialog._bindClose = null;\n      }\n\n      this.plugins.dialog._bindClose = function (e) {\n        if (!/27/.test(e.keyCode)) return;\n        this.plugins.dialog.close.call(this);\n      }.bind(this);\n\n      this._d.addEventListener('keydown', this.plugins.dialog._bindClose);\n\n      this.context.dialog.updateModal = update;\n\n      if (this.options.popupDisplay === 'full') {\n        this.context.dialog.modalArea.style.position = 'fixed';\n      } else {\n        this.context.dialog.modalArea.style.position = 'absolute';\n      }\n\n      this.context.dialog.kind = kind;\n      this.modalForm = this.context[kind].modal;\n      var focusElement = this.context[kind].focusElement;\n      if (typeof this.plugins[kind].on === 'function') this.plugins[kind].on.call(this, update);\n      this.context.dialog.modalArea.style.display = 'block';\n      this.context.dialog.back.style.display = 'block';\n      this.context.dialog.modal.style.display = 'block';\n      this.modalForm.style.display = 'block';\n      if (focusElement) focusElement.focus();\n    },\n    _bindClose: null,\n\n    /**\n     * @description Close a Dialog plugin\n     * The plugin's \"init\" method is called.\n     */\n    close: function close() {\n      if (this.plugins.dialog._bindClose) {\n        this._d.removeEventListener('keydown', this.plugins.dialog._bindClose);\n\n        this.plugins.dialog._bindClose = null;\n      }\n\n      var kind = this.context.dialog.kind;\n      this.modalForm.style.display = 'none';\n      this.context.dialog.back.style.display = 'none';\n      this.context.dialog.modalArea.style.display = 'none';\n      this.context.dialog.updateModal = false;\n      if (typeof this.plugins[kind].init === 'function') this.plugins[kind].init.call(this);\n      this.context.dialog.kind = '';\n      this.modalForm = null;\n      this.focus();\n    }\n  };\n\n  if (typeof noGlobal === typeof undefined) {\n    if (!window.SUNEDITOR_MODULES) {\n      Object.defineProperty(window, 'SUNEDITOR_MODULES', {\n        enumerable: true,\n        writable: false,\n        configurable: false,\n        value: {}\n      });\n    }\n\n    Object.defineProperty(window.SUNEDITOR_MODULES, 'dialog', {\n      enumerable: true,\n      writable: false,\n      configurable: false,\n      value: dialog\n    });\n  }\n\n  return dialog;\n});","map":{"version":3,"sources":["/github/workspace/node_modules/suneditor/src/plugins/modules/dialog.js"],"names":["global","factory","module","exports","document","w","Error","window","noGlobal","dialog","name","add","core","context","kind","updateModal","_closeSignal","dialog_div","util","createElement","className","dialog_back","style","display","dialog_area","appendChild","modalArea","back","modal","addEventListener","_onMouseDown_dialog","bind","_onClick_dialog","element","relative","e","test","target","getAttribute","plugins","close","call","open","update","modalForm","_bindClose","_d","removeEventListener","keyCode","options","popupDisplay","position","focusElement","on","focus","init","undefined","SUNEDITOR_MODULES","Object","defineProperty","enumerable","writable","configurable","value"],"mappings":"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","sourcesContent":["/*\n * wysiwyg web editor\n *\n * suneditor.js\n * Copyright 2017 JiHong Lee.\n * MIT license.\n */\n'use strict';\n\n(function (global, factory) {\n    if (typeof module === 'object' && typeof module.exports === 'object') {\n        module.exports = global.document ?\n            factory(global, true) :\n            function (w) {\n                if (!w.document) {\n                    throw new Error('SUNEDITOR_MODULES a window with a document');\n                }\n                return factory(w);\n            };\n    } else {\n        factory(global);\n    }\n}(typeof window !== 'undefined' ? window : this, function (window, noGlobal) {\n    const dialog = {\n        name: 'dialog',\n        /**\n         * @description Constructor\n         * @param {Object} core Core object \n         */\n        add: function (core) {\n            const context = core.context;\n            context.dialog = {\n                kind: '',\n                updateModal: false,\n                _closeSignal: false\n            };\n\n            /** dialog */\n            let dialog_div = core.util.createElement('DIV');\n            dialog_div.className = 'se-dialog sun-editor-common';\n\n            let dialog_back = core.util.createElement('DIV');\n            dialog_back.className = 'se-dialog-back';\n            dialog_back.style.display = 'none';\n\n            let dialog_area = core.util.createElement('DIV');\n            dialog_area.className = 'se-dialog-inner';\n            dialog_area.style.display = 'none';\n\n            dialog_div.appendChild(dialog_back);\n            dialog_div.appendChild(dialog_area);\n\n            context.dialog.modalArea = dialog_div;\n            context.dialog.back = dialog_back;\n            context.dialog.modal = dialog_area;\n\n            /** add event listeners */\n            context.dialog.modal.addEventListener('mousedown', this._onMouseDown_dialog.bind(core));\n            context.dialog.modal.addEventListener('click', this._onClick_dialog.bind(core));\n            \n            /** append html */\n            context.element.relative.appendChild(dialog_div);\n            \n            /** empty memory */\n            dialog_div = null, dialog_back = null, dialog_area = null;\n        },\n\n        /**\n         * @description Event to control the behavior of closing the dialog\n         * @param {MouseEvent} e Event object\n         * @private\n         */\n        _onMouseDown_dialog: function (e) {\n            if (/se-dialog-inner/.test(e.target.className)) {\n                this.context.dialog._closeSignal = true;\n            } else {\n                this.context.dialog._closeSignal = false;\n            }\n        },\n\n        /**\n         * @description Event to close the window when the outside area of the dialog or close button is click\n         * @param {MouseEvent} e Event object\n         * @private\n         */\n        _onClick_dialog: function (e) {\n            if (/close/.test(e.target.getAttribute('data-command')) || this.context.dialog._closeSignal) {\n                this.plugins.dialog.close.call(this);\n            }\n        },\n\n        /**\n         * @description Open a Dialog plugin\n         * @param {String} kind Dialog plugin name\n         * @param {Boolean} update Whether it will open for update ('image' === this.currentControllerName)\n         */\n        open: function (kind, update)  {\n            if (this.modalForm) return false;\n            if (this.plugins.dialog._bindClose) {\n                this._d.removeEventListener('keydown', this.plugins.dialog._bindClose);\n                this.plugins.dialog._bindClose = null;\n            }\n\n            this.plugins.dialog._bindClose = function (e) {\n                if (!/27/.test(e.keyCode)) return;\n                this.plugins.dialog.close.call(this);\n            }.bind(this);\n            this._d.addEventListener('keydown', this.plugins.dialog._bindClose);\n\n            this.context.dialog.updateModal = update;\n\n            if (this.options.popupDisplay === 'full') {\n                this.context.dialog.modalArea.style.position = 'fixed';\n            } else {\n                this.context.dialog.modalArea.style.position = 'absolute';\n            }\n\n            this.context.dialog.kind = kind;\n            this.modalForm = this.context[kind].modal;\n            const focusElement = this.context[kind].focusElement;\n\n            if (typeof this.plugins[kind].on === 'function') this.plugins[kind].on.call(this, update);\n\n            this.context.dialog.modalArea.style.display = 'block';\n            this.context.dialog.back.style.display = 'block';\n            this.context.dialog.modal.style.display = 'block';\n            this.modalForm.style.display = 'block';\n\n            if (focusElement) focusElement.focus();\n        },\n\n        _bindClose: null,\n        \n        /**\n         * @description Close a Dialog plugin\n         * The plugin's \"init\" method is called.\n         */\n        close: function () {\n            if (this.plugins.dialog._bindClose) {\n                this._d.removeEventListener('keydown', this.plugins.dialog._bindClose);\n                this.plugins.dialog._bindClose = null;\n            }\n\n            const kind = this.context.dialog.kind;\n            this.modalForm.style.display = 'none';\n            this.context.dialog.back.style.display = 'none';\n            this.context.dialog.modalArea.style.display = 'none';\n            this.context.dialog.updateModal = false;\n            if (typeof this.plugins[kind].init === 'function') this.plugins[kind].init.call(this);\n            this.context.dialog.kind = '';\n            this.modalForm = null;\n            this.focus();\n        }\n    };\n\n    if (typeof noGlobal === typeof undefined) {\n        if (!window.SUNEDITOR_MODULES) {\n            Object.defineProperty(window, 'SUNEDITOR_MODULES', {\n                enumerable: true,\n                writable: false,\n                configurable: false,\n                value: {}\n            });\n        }\n\n        Object.defineProperty(window.SUNEDITOR_MODULES, 'dialog', {\n            enumerable: true,\n            writable: false,\n            configurable: false,\n            value: dialog\n        });\n    }\n\n    return dialog;\n}));"]},"metadata":{},"sourceType":"script"}