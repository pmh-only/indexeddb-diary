{"ast":null,"code":"/*\n * wysiwyg web editor\n *\n * suneditor.js\n * Copyright 2017 JiHong Lee.\n * MIT license.\n */\n'use strict';\n\nexport default {\n  name: 'fontSize',\n  display: 'submenu',\n  add: function add(core, targetElement) {\n    var context = core.context;\n    context.fontSize = {\n      targetText: targetElement.querySelector('.txt'),\n      _sizeList: null,\n      currentSize: ''\n    };\n    /** set submenu */\n\n    var listDiv = this.setSubmenu(core);\n    var listUl = listDiv.querySelector('ul');\n    /** add event listeners */\n\n    listUl.addEventListener('click', this.pickup.bind(core));\n    context.fontSize._sizeList = listUl.querySelectorAll('li button');\n    /** append target button menu */\n\n    core.initMenuTarget(this.name, targetElement, listDiv);\n    /** empty memory */\n\n    listDiv = null, listUl = null;\n  },\n  setSubmenu: function setSubmenu(core) {\n    var option = core.options;\n    var lang = core.lang;\n    var listDiv = core.util.createElement('DIV');\n    listDiv.className = 'se-submenu se-list-layer se-list-font-size';\n    var sizeList = !option.fontSize ? [8, 9, 10, 11, 12, 14, 16, 18, 20, 22, 24, 26, 28, 36, 48, 72] : option.fontSize;\n    var list = '<div class=\"se-list-inner\">' + '<ul class=\"se-list-basic\">' + '<li><button type=\"button\" class=\"default_value se-btn-list\" title=\"' + lang.toolbar.default + '\">(' + lang.toolbar.default + ')</button></li>';\n\n    for (var i = 0, unit = option.fontSizeUnit, len = sizeList.length, size; i < len; i++) {\n      size = sizeList[i];\n      list += '<li><button type=\"button\" class=\"se-btn-list\" data-value=\"' + size + unit + '\" title=\"' + size + unit + '\" style=\"font-size:' + size + unit + ';\">' + size + '</button></li>';\n    }\n\n    list += '</ul></div>';\n    listDiv.innerHTML = list;\n    return listDiv;\n  },\n\n  /**\n  * @Override core\n  */\n  active: function active(element) {\n    if (!element) {\n      this.util.changeTxt(this.context.fontSize.targetText, this.hasFocus ? this.wwComputedStyle.fontSize : this.lang.toolbar.fontSize);\n    } else if (element.style && element.style.fontSize.length > 0) {\n      this.util.changeTxt(this.context.fontSize.targetText, element.style.fontSize);\n      return true;\n    }\n\n    return false;\n  },\n\n  /**\n  * @Override submenu\n  */\n  on: function on() {\n    var fontSizeContext = this.context.fontSize;\n    var sizeList = fontSizeContext._sizeList;\n    var currentSize = fontSizeContext.targetText.textContent;\n\n    if (currentSize !== fontSizeContext.currentSize) {\n      for (var i = 0, len = sizeList.length; i < len; i++) {\n        if (currentSize === sizeList[i].getAttribute('data-value')) {\n          this.util.addClass(sizeList[i], 'active');\n        } else {\n          this.util.removeClass(sizeList[i], 'active');\n        }\n      }\n\n      fontSizeContext.currentSize = currentSize;\n    }\n  },\n  pickup: function pickup(e) {\n    if (!/^BUTTON$/i.test(e.target.tagName)) return false;\n    e.preventDefault();\n    e.stopPropagation();\n    var value = e.target.getAttribute('data-value');\n\n    if (value) {\n      var newNode = this.util.createElement('SPAN');\n      newNode.style.fontSize = value;\n      this.nodeChange(newNode, ['font-size'], null, null);\n    } else {\n      this.nodeChange(null, ['font-size'], ['span'], true);\n    }\n\n    this.submenuOff();\n  }\n};","map":{"version":3,"sources":["/github/workspace/node_modules/suneditor/src/plugins/submenu/fontSize.js"],"names":["name","display","add","core","targetElement","context","fontSize","targetText","querySelector","_sizeList","currentSize","listDiv","setSubmenu","listUl","addEventListener","pickup","bind","querySelectorAll","initMenuTarget","option","options","lang","util","createElement","className","sizeList","list","toolbar","default","i","unit","fontSizeUnit","len","length","size","innerHTML","active","element","changeTxt","hasFocus","wwComputedStyle","style","on","fontSizeContext","textContent","getAttribute","addClass","removeClass","e","test","target","tagName","preventDefault","stopPropagation","value","newNode","nodeChange","submenuOff"],"mappings":"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","sourcesContent":["/*\n * wysiwyg web editor\n *\n * suneditor.js\n * Copyright 2017 JiHong Lee.\n * MIT license.\n */\n'use strict';\n\nexport default {\n    name: 'fontSize',\n    display: 'submenu',\n    add: function (core, targetElement) {\n        const context = core.context;\n        context.fontSize = {\n            targetText: targetElement.querySelector('.txt'),\n            _sizeList: null,\n            currentSize: ''\n        };\n\n        /** set submenu */\n        let listDiv = this.setSubmenu(core);\n        let listUl = listDiv.querySelector('ul');\n\n        /** add event listeners */\n        listUl.addEventListener('click', this.pickup.bind(core));\n        context.fontSize._sizeList = listUl.querySelectorAll('li button');\n\n        /** append target button menu */\n        core.initMenuTarget(this.name, targetElement, listDiv);\n\n        /** empty memory */\n        listDiv = null, listUl = null;\n    },\n\n    setSubmenu: function (core) {\n        const option = core.options;\n        const lang = core.lang;\n        const listDiv = core.util.createElement('DIV');\n\n        listDiv.className = 'se-submenu se-list-layer se-list-font-size';\n\n        const sizeList = !option.fontSize ? [8, 9, 10, 11, 12, 14, 16, 18, 20, 22, 24, 26, 28, 36, 48, 72] : option.fontSize;\n\n        let list = '<div class=\"se-list-inner\">' +\n                '<ul class=\"se-list-basic\">' +\n                    '<li><button type=\"button\" class=\"default_value se-btn-list\" title=\"' + lang.toolbar.default + '\">(' + lang.toolbar.default + ')</button></li>';\n        for (let i = 0, unit = option.fontSizeUnit, len = sizeList.length, size; i < len; i++) {\n            size = sizeList[i];\n            list += '<li><button type=\"button\" class=\"se-btn-list\" data-value=\"' + size + unit + '\" title=\"' + size + unit + '\" style=\"font-size:' + size + unit + ';\">' + size + '</button></li>';\n        }\n        list += '</ul></div>';\n\n        listDiv.innerHTML = list;\n\n        return listDiv;\n    },\n\n     /**\n     * @Override core\n     */\n    active: function (element) {\n        if (!element) {\n            this.util.changeTxt(this.context.fontSize.targetText, this.hasFocus ? this.wwComputedStyle.fontSize : this.lang.toolbar.fontSize);\n        } else if (element.style && element.style.fontSize.length > 0) {\n            this.util.changeTxt(this.context.fontSize.targetText, element.style.fontSize);\n            return true;\n        }\n\n        return false;\n    },\n\n     /**\n     * @Override submenu\n     */\n    on: function () {\n        const fontSizeContext = this.context.fontSize;\n        const sizeList = fontSizeContext._sizeList;\n        const currentSize = fontSizeContext.targetText.textContent;\n\n        if (currentSize !== fontSizeContext.currentSize) {\n            for (let i = 0, len = sizeList.length; i < len; i++) {\n                if (currentSize === sizeList[i].getAttribute('data-value')) {\n                    this.util.addClass(sizeList[i], 'active');\n                } else {\n                    this.util.removeClass(sizeList[i], 'active');\n                }\n            }\n\n            fontSizeContext.currentSize = currentSize;\n        }\n    },\n\n    pickup: function (e) {\n        if (!/^BUTTON$/i.test(e.target.tagName)) return false;\n        \n        e.preventDefault();\n        e.stopPropagation();\n\n        const value = e.target.getAttribute('data-value');\n\n        if (value) {\n            const newNode = this.util.createElement('SPAN');\n            newNode.style.fontSize = value;\n            this.nodeChange(newNode, ['font-size'], null, null);\n        } else {\n            this.nodeChange(null, ['font-size'], ['span'], true);\n        }\n\n        this.submenuOff();\n    }\n};\n"]},"metadata":{},"sourceType":"module"}