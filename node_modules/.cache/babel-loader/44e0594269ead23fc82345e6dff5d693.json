{"ast":null,"code":"/*\n * wysiwyg web editor\n *\n * suneditor.js\n * Copyright 2018 JiHong Lee.\n * MIT license.\n */\n'use strict';\n\nexport default {\n  name: 'selectMenu',\n  add: function add(core) {\n    core.context.selectMenu = {\n      caller: {},\n      callerContext: null\n    };\n  },\n  setForm: function setForm() {\n    return '<div class=\"se-select-list\"></div>';\n  },\n  createList: function createList(listContext, items, html) {\n    listContext.form.innerHTML = '<ul>' + html + '</ul>';\n    listContext.items = items;\n    listContext.menus = listContext.form.querySelectorAll('li');\n  },\n  initEvent: function initEvent(pluginName, forms) {\n    var form = forms.querySelector('.se-select-list');\n    var context = this.context.selectMenu.caller[pluginName] = {\n      form: form,\n      items: [],\n      menus: [],\n      index: -1,\n      item: null,\n      clickMethod: null,\n      callerName: pluginName\n    };\n    form.addEventListener('mousedown', this.plugins.selectMenu.onMousedown_list);\n    form.addEventListener('mousemove', this.plugins.selectMenu.onMouseMove_list.bind(this, context));\n    form.addEventListener('click', this.plugins.selectMenu.onClick_list.bind(this, context));\n  },\n  onMousedown_list: function onMousedown_list(e) {\n    e.preventDefault();\n    e.stopPropagation();\n  },\n  onMouseMove_list: function onMouseMove_list(context, e) {\n    this.util.addClass(context.form, '__se_select-menu-mouse-move');\n    var index = e.target.getAttribute('data-index');\n    if (!index) return;\n    context.index = index * 1;\n  },\n  onClick_list: function onClick_list(context, e) {\n    var index = e.target.getAttribute('data-index');\n    if (!index) return;\n    context.clickMethod.call(this, context.items[index]);\n  },\n  moveItem: function moveItem(listContext, num) {\n    this.util.removeClass(listContext.form, '__se_select-menu-mouse-move');\n    num = listContext.index + num;\n    var menus = listContext.menus;\n    var len = menus.length;\n    var selectIndex = listContext.index = num >= len ? 0 : num < 0 ? len - 1 : num;\n\n    for (var i = 0; i < len; i++) {\n      if (i === selectIndex) {\n        this.util.addClass(menus[i], 'active');\n      } else {\n        this.util.removeClass(menus[i], 'active');\n      }\n    }\n\n    listContext.item = listContext.items[selectIndex];\n  },\n  getItem: function getItem(listContext, index) {\n    index = !index || index < 0 ? listContext.index : index;\n    return listContext.items[index];\n  },\n  on: function on(callerName, clickMethod) {\n    var listContext = this.context.selectMenu.caller[callerName];\n    this.context.selectMenu.callerContext = listContext;\n    listContext.clickMethod = clickMethod;\n    listContext.callerName = callerName;\n  },\n  open: function open(listContext, positionHandler) {\n    var form = listContext.form;\n    form.style.visibility = 'hidden';\n    form.style.display = 'block';\n    positionHandler(form);\n    form.style.visibility = '';\n  },\n  close: function close(listContext) {\n    listContext.form.style.display = 'none';\n    listContext.items = [];\n    listContext.menus = [];\n    listContext.index = -1;\n    listContext.item = null;\n  },\n  init: function init(listContext) {\n    if (!listContext) return;\n    listContext.items = [];\n    listContext.menus = [];\n    listContext.index = -1;\n    listContext.item = null;\n    listContext.callerName = '';\n    this.context.selectMenu.callerContext = null;\n  }\n};","map":{"version":3,"sources":["/github/workspace/node_modules/suneditor/src/plugins/modules/_selectMenu.js"],"names":["name","add","core","context","selectMenu","caller","callerContext","setForm","createList","listContext","items","html","form","innerHTML","menus","querySelectorAll","initEvent","pluginName","forms","querySelector","index","item","clickMethod","callerName","addEventListener","plugins","onMousedown_list","onMouseMove_list","bind","onClick_list","e","preventDefault","stopPropagation","util","addClass","target","getAttribute","call","moveItem","num","removeClass","len","length","selectIndex","i","getItem","on","open","positionHandler","style","visibility","display","close","init"],"mappings":"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","sourcesContent":["/*\n * wysiwyg web editor\n *\n * suneditor.js\n * Copyright 2018 JiHong Lee.\n * MIT license.\n */\n'use strict';\n\nexport default {\n    name: 'selectMenu',\n    add: function (core) {\n        core.context.selectMenu = {\n            caller: {},\n            callerContext: null\n        };\n    },\n\n    setForm: function () {\n        return '<div class=\"se-select-list\"></div>';\n    },\n\n    createList: function (listContext, items, html) {\n        listContext.form.innerHTML = '<ul>' + html + '</ul>';\n        listContext.items = items;\n        listContext.menus = listContext.form.querySelectorAll('li');\n    },\n\n    initEvent: function (pluginName, forms) {\n        const form = forms.querySelector('.se-select-list');\n        const context = this.context.selectMenu.caller[pluginName] = {\n            form: form,\n            items: [],\n            menus: [],\n            index: -1,\n            item: null,\n            clickMethod: null,\n            callerName: pluginName\n        };\n\n        form.addEventListener('mousedown', this.plugins.selectMenu.onMousedown_list);\n        form.addEventListener('mousemove', this.plugins.selectMenu.onMouseMove_list.bind(this, context));\n        form.addEventListener('click', this.plugins.selectMenu.onClick_list.bind(this, context));\n    },\n\n    onMousedown_list: function (e) {\n        e.preventDefault();\n        e.stopPropagation();\n    },\n\n    onMouseMove_list: function (context, e) {\n        this.util.addClass(context.form, '__se_select-menu-mouse-move');\n        const index = e.target.getAttribute('data-index');\n        if (!index) return;\n        context.index = index * 1;\n    },\n\n    onClick_list: function (context, e) {\n        const index = e.target.getAttribute('data-index');\n        if (!index) return;\n        context.clickMethod.call(this, context.items[index]);\n    },\n\n    moveItem: function (listContext, num) {\n        this.util.removeClass(listContext.form, '__se_select-menu-mouse-move');\n        num = listContext.index + num;\n        const menus = listContext.menus;\n        const len = menus.length;\n        const selectIndex = listContext.index = num >= len ? 0 : num < 0 ? len - 1 : num;\n        \n        for (let i = 0; i < len; i++) {\n            if (i === selectIndex) {\n                this.util.addClass(menus[i], 'active');\n            } else {\n                this.util.removeClass(menus[i], 'active');\n            }\n        }\n\n        listContext.item = listContext.items[selectIndex];\n    },\n\n    getItem: function (listContext, index) {\n        index = (!index || index < 0) ? listContext.index : index;\n        return listContext.items[index];\n    },\n\n    on: function (callerName, clickMethod) {\n        const listContext = this.context.selectMenu.caller[callerName];\n        this.context.selectMenu.callerContext = listContext;\n        listContext.clickMethod = clickMethod;\n        listContext.callerName = callerName;\n    },\n\n    open: function (listContext, positionHandler) {\n        const form = listContext.form;\n        form.style.visibility = 'hidden';\n        form.style.display = 'block';\n        positionHandler(form);\n        form.style.visibility = '';\n    },\n\n    close: function (listContext) {\n        listContext.form.style.display = 'none';\n        listContext.items = [];\n        listContext.menus = [];\n        listContext.index = -1;\n        listContext.item = null;\n    },\n\n    init: function (listContext) {\n        if (!listContext) return;\n        listContext.items = [];\n        listContext.menus = [];\n        listContext.index = -1;\n        listContext.item = null;\n        listContext.callerName = '';\n        this.context.selectMenu.callerContext = null;\n    }\n};"]},"metadata":{},"sourceType":"module"}