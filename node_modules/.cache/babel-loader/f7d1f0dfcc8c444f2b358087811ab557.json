{"ast":null,"code":"/*\n * wysiwyg web editor\n *\n * suneditor.js\n * Copyright 2017 JiHong Lee.\n * MIT license.\n */\n'use strict';\n\nexport default {\n  name: 'align',\n  display: 'submenu',\n  add: function add(core, targetElement) {\n    var icons = core.icons;\n    var context = core.context;\n    context.align = {\n      targetButton: targetElement,\n      _alignList: null,\n      currentAlign: '',\n      defaultDir: core.options.rtl ? 'right' : 'left',\n      icons: {\n        justify: icons.align_justify,\n        left: icons.align_left,\n        right: icons.align_right,\n        center: icons.align_center\n      }\n    };\n    /** set submenu */\n\n    var listDiv = this.setSubmenu(core);\n    var listUl = listDiv.querySelector('ul');\n    /** add event listeners */\n\n    listUl.addEventListener('click', this.pickup.bind(core));\n    context.align._alignList = listUl.querySelectorAll('li button');\n    /** append target button menu */\n\n    core.initMenuTarget(this.name, targetElement, listDiv);\n    /** empty memory */\n\n    listDiv = null, listUl = null;\n  },\n  setSubmenu: function setSubmenu(core) {\n    var lang = core.lang;\n    var icons = core.icons;\n    var listDiv = core.util.createElement('DIV');\n    var leftDir = core.context.align.defaultDir === 'left';\n    var leftMenu = '<li>' + '<button type=\"button\" class=\"se-btn-list se-btn-align\" data-command=\"justifyleft\" data-value=\"left\" title=\"' + lang.toolbar.alignLeft + '\">' + '<span class=\"se-list-icon\">' + icons.align_left + '</span>' + lang.toolbar.alignLeft + '</button>' + '</li>';\n    var rightMenu = '<li>' + '<button type=\"button\" class=\"se-btn-list se-btn-align\" data-command=\"justifyright\" data-value=\"right\" title=\"' + lang.toolbar.alignRight + '\">' + '<span class=\"se-list-icon\">' + icons.align_right + '</span>' + lang.toolbar.alignRight + '</button>' + '</li>';\n    listDiv.className = 'se-submenu se-list-layer se-list-align';\n    listDiv.innerHTML = '' + '<div class=\"se-list-inner\">' + '<ul class=\"se-list-basic\">' + (leftDir ? leftMenu : rightMenu) + '<li>' + '<button type=\"button\" class=\"se-btn-list se-btn-align\" data-command=\"justifycenter\" data-value=\"center\" title=\"' + lang.toolbar.alignCenter + '\">' + '<span class=\"se-list-icon\">' + icons.align_center + '</span>' + lang.toolbar.alignCenter + '</button>' + '</li>' + (leftDir ? rightMenu : leftMenu) + '<li>' + '<button type=\"button\" class=\"se-btn-list se-btn-align\" data-command=\"justifyfull\" data-value=\"justify\" title=\"' + lang.toolbar.alignJustify + '\">' + '<span class=\"se-list-icon\">' + icons.align_justify + '</span>' + lang.toolbar.alignJustify + '</button>' + '</li>' + '</ul>' + '</div>';\n    return listDiv;\n  },\n\n  /**\n   * @Override core\n   */\n  active: function active(element) {\n    var alignContext = this.context.align;\n    var targetButton = alignContext.targetButton;\n    var target = targetButton.firstElementChild;\n\n    if (!element) {\n      this.util.changeElement(target, alignContext.icons[alignContext.defaultDir]);\n      targetButton.removeAttribute('data-focus');\n    } else if (this.util.isFormatElement(element)) {\n      var textAlign = element.style.textAlign;\n\n      if (textAlign) {\n        this.util.changeElement(target, alignContext.icons[textAlign] || alignContext.icons[alignContext.defaultDir]);\n        targetButton.setAttribute('data-focus', textAlign);\n        return true;\n      }\n    }\n\n    return false;\n  },\n\n  /**\n   * @Override submenu\n   */\n  on: function on() {\n    var alignContext = this.context.align;\n    var alignList = alignContext._alignList;\n    var currentAlign = alignContext.targetButton.getAttribute('data-focus') || alignContext.defaultDir;\n\n    if (currentAlign !== alignContext.currentAlign) {\n      for (var i = 0, len = alignList.length; i < len; i++) {\n        if (currentAlign === alignList[i].getAttribute('data-value')) {\n          this.util.addClass(alignList[i], 'active');\n        } else {\n          this.util.removeClass(alignList[i], 'active');\n        }\n      }\n\n      alignContext.currentAlign = currentAlign;\n    }\n  },\n  pickup: function pickup(e) {\n    e.preventDefault();\n    e.stopPropagation();\n    var target = e.target;\n    var value = null;\n\n    while (!value && !/UL/i.test(target.tagName)) {\n      value = target.getAttribute('data-value');\n      target = target.parentNode;\n    }\n\n    if (!value) return;\n    var defaultDir = this.context.align.defaultDir;\n    var selectedFormsts = this.getSelectedElements();\n\n    for (var i = 0, len = selectedFormsts.length; i < len; i++) {\n      this.util.setStyle(selectedFormsts[i], 'textAlign', value === defaultDir ? '' : value);\n    }\n\n    this.effectNode = null;\n    this.submenuOff();\n    this.focus(); // history stack\n\n    this.history.push(false);\n  }\n};","map":{"version":3,"sources":["/github/workspace/node_modules/suneditor/src/plugins/submenu/align.js"],"names":["name","display","add","core","targetElement","icons","context","align","targetButton","_alignList","currentAlign","defaultDir","options","rtl","justify","align_justify","left","align_left","right","align_right","center","align_center","listDiv","setSubmenu","listUl","querySelector","addEventListener","pickup","bind","querySelectorAll","initMenuTarget","lang","util","createElement","leftDir","leftMenu","toolbar","alignLeft","rightMenu","alignRight","className","innerHTML","alignCenter","alignJustify","active","element","alignContext","target","firstElementChild","changeElement","removeAttribute","isFormatElement","textAlign","style","setAttribute","on","alignList","getAttribute","i","len","length","addClass","removeClass","e","preventDefault","stopPropagation","value","test","tagName","parentNode","selectedFormsts","getSelectedElements","setStyle","effectNode","submenuOff","focus","history","push"],"mappings":"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","sourcesContent":["/*\n * wysiwyg web editor\n *\n * suneditor.js\n * Copyright 2017 JiHong Lee.\n * MIT license.\n */\n'use strict';\n\nexport default {\n    name: 'align',\n    display: 'submenu',\n    add: function (core, targetElement) {\n        const icons = core.icons;\n        const context = core.context;\n        context.align = {\n            targetButton: targetElement,\n            _alignList: null,\n            currentAlign: '',\n            defaultDir: core.options.rtl ? 'right' : 'left', \n            icons: {\n                justify: icons.align_justify,\n                left: icons.align_left,\n                right: icons.align_right,\n                center: icons.align_center\n            }\n        };\n\n        /** set submenu */\n        let listDiv = this.setSubmenu(core);\n        let listUl = listDiv.querySelector('ul');\n\n        /** add event listeners */\n        listUl.addEventListener('click', this.pickup.bind(core));\n        context.align._alignList = listUl.querySelectorAll('li button');\n\n        /** append target button menu */\n        core.initMenuTarget(this.name, targetElement, listDiv);\n\n        /** empty memory */\n        listDiv = null, listUl = null;\n    },\n\n    setSubmenu: function (core) {\n        const lang = core.lang;\n        const icons = core.icons;\n        const listDiv = core.util.createElement('DIV');\n        const leftDir = core.context.align.defaultDir === 'left';\n\n        const leftMenu = '<li>' +\n            '<button type=\"button\" class=\"se-btn-list se-btn-align\" data-command=\"justifyleft\" data-value=\"left\" title=\"' + lang.toolbar.alignLeft + '\">' +\n                '<span class=\"se-list-icon\">' + icons.align_left + '</span>' + lang.toolbar.alignLeft +\n            '</button>' +\n        '</li>';\n\n        const rightMenu = '<li>' +\n            '<button type=\"button\" class=\"se-btn-list se-btn-align\" data-command=\"justifyright\" data-value=\"right\" title=\"' + lang.toolbar.alignRight + '\">' +\n                '<span class=\"se-list-icon\">' + icons.align_right +'</span>' + lang.toolbar.alignRight +\n            '</button>' +\n        '</li>';\n\n        listDiv.className = 'se-submenu se-list-layer se-list-align';\n        listDiv.innerHTML = '' +\n            '<div class=\"se-list-inner\">' +\n                '<ul class=\"se-list-basic\">' +\n                    (leftDir ? leftMenu : rightMenu) +\n                    '<li>' +\n                        '<button type=\"button\" class=\"se-btn-list se-btn-align\" data-command=\"justifycenter\" data-value=\"center\" title=\"' + lang.toolbar.alignCenter + '\">' +\n                            '<span class=\"se-list-icon\">' + icons.align_center + '</span>' + lang.toolbar.alignCenter +\n                        '</button>' +\n                    '</li>' +\n                    (leftDir? rightMenu : leftMenu) +\n                    '<li>' +\n                        '<button type=\"button\" class=\"se-btn-list se-btn-align\" data-command=\"justifyfull\" data-value=\"justify\" title=\"' + lang.toolbar.alignJustify + '\">' +\n                            '<span class=\"se-list-icon\">' + icons.align_justify + '</span>' + lang.toolbar.alignJustify +\n                        '</button>' +\n                    '</li>' +\n                '</ul>' +\n            '</div>';\n\n        return listDiv;\n    },\n\n    /**\n     * @Override core\n     */\n    active: function (element) {\n        const alignContext = this.context.align;\n        const targetButton = alignContext.targetButton;\n        const target = targetButton.firstElementChild;\n\n        if (!element) {\n            this.util.changeElement(target, alignContext.icons[alignContext.defaultDir]);\n            targetButton.removeAttribute('data-focus');\n        } else if (this.util.isFormatElement(element)) {\n            const textAlign = element.style.textAlign;\n            if (textAlign) {\n                this.util.changeElement(target, alignContext.icons[textAlign] || alignContext.icons[alignContext.defaultDir]);\n                targetButton.setAttribute('data-focus', textAlign);\n                return true;\n            }\n        }\n\n        return false;\n    },\n\n    /**\n     * @Override submenu\n     */\n    on: function () {\n        const alignContext = this.context.align;\n        const alignList = alignContext._alignList;\n        const currentAlign = alignContext.targetButton.getAttribute('data-focus') || alignContext.defaultDir;\n\n        if (currentAlign !== alignContext.currentAlign) {\n            for (let i = 0, len = alignList.length; i < len; i++) {\n                if (currentAlign === alignList[i].getAttribute('data-value')) {\n                    this.util.addClass(alignList[i], 'active');\n                } else {\n                    this.util.removeClass(alignList[i], 'active');\n                }\n            }\n\n            alignContext.currentAlign = currentAlign;\n        }\n    },\n\n    pickup: function (e) {\n        e.preventDefault();\n        e.stopPropagation();\n\n        let target = e.target;\n        let value = null;\n\n        while (!value && !/UL/i.test(target.tagName)) {\n            value = target.getAttribute('data-value');\n            target = target.parentNode;\n        }\n\n        if (!value) return;\n\n        const defaultDir = this.context.align.defaultDir;\n        const selectedFormsts = this.getSelectedElements();\n        for (let i = 0, len = selectedFormsts.length; i < len; i++) {\n            this.util.setStyle(selectedFormsts[i], 'textAlign', (value === defaultDir ? '' : value));\n        }\n\n        this.effectNode = null;\n        this.submenuOff();\n        this.focus();\n        \n        // history stack\n        this.history.push(false);\n    }\n};\n"]},"metadata":{},"sourceType":"module"}