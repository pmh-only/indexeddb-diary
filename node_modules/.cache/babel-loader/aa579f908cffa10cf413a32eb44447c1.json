{"ast":null,"code":"/*\r\n * wysiwyg web editor\r\n *\r\n * suneditor.js\r\n * Copyright 2017 JiHong Lee.\r\n * MIT license.\r\n */\n'use strict';\n\nimport colorPicker from '../modules/_colorPicker';\nexport default {\n  name: 'fontColor',\n  display: 'submenu',\n  add: function add(core, targetElement) {\n    core.addModule([colorPicker]);\n    var context = core.context;\n    context.fontColor = {\n      previewEl: null,\n      colorInput: null,\n      colorList: null\n    };\n    /** set submenu */\n\n    var listDiv = this.setSubmenu(core);\n    context.fontColor.colorInput = listDiv.querySelector('._se_color_picker_input');\n    /** add event listeners */\n\n    context.fontColor.colorInput.addEventListener('keyup', this.onChangeInput.bind(core));\n    listDiv.querySelector('._se_color_picker_submit').addEventListener('click', this.submit.bind(core));\n    listDiv.querySelector('._se_color_picker_remove').addEventListener('click', this.remove.bind(core));\n    listDiv.addEventListener('click', this.pickup.bind(core));\n    context.fontColor.colorList = listDiv.querySelectorAll('li button');\n    /** append target button menu */\n\n    core.initMenuTarget(this.name, targetElement, listDiv);\n    /** empty memory */\n\n    listDiv = null;\n  },\n  setSubmenu: function setSubmenu(core) {\n    var colorArea = core.context.colorPicker.colorListHTML;\n    var listDiv = core.util.createElement('DIV');\n    listDiv.className = 'se-submenu se-list-layer';\n    listDiv.innerHTML = colorArea;\n    return listDiv;\n  },\n\n  /**\r\n  * @Override submenu\r\n  */\n  on: function on() {\n    var contextPicker = this.context.colorPicker;\n    var contextFontColor = this.context.fontColor;\n    contextPicker._colorInput = contextFontColor.colorInput;\n    var color = this.wwComputedStyle.color;\n    contextPicker._defaultColor = color ? this.plugins.colorPicker.isHexColor(color) ? color : this.plugins.colorPicker.rgb2hex(color) : \"#333333\";\n    contextPicker._styleProperty = 'color';\n    contextPicker._colorList = contextFontColor.colorList;\n    this.plugins.colorPicker.init.call(this, this.getSelectionNode(), null);\n  },\n\n  /**\r\n  * @Override _colorPicker\r\n  */\n  onChangeInput: function onChangeInput(e) {\n    this.plugins.colorPicker.setCurrentColor.call(this, e.target.value);\n  },\n  submit: function submit() {\n    this.plugins.fontColor.applyColor.call(this, this.context.colorPicker._currentColor);\n  },\n  pickup: function pickup(e) {\n    e.preventDefault();\n    e.stopPropagation();\n    this.plugins.fontColor.applyColor.call(this, e.target.getAttribute('data-value'));\n  },\n  remove: function remove() {\n    this.nodeChange(null, ['color'], ['span'], true);\n    this.submenuOff();\n  },\n  applyColor: function applyColor(color) {\n    if (!color) return;\n    var newNode = this.util.createElement('SPAN');\n    newNode.style.color = color;\n    this.nodeChange(newNode, ['color'], null, null);\n    this.submenuOff();\n  }\n};","map":{"version":3,"sources":["/github/workspace/node_modules/suneditor/src/plugins/submenu/fontColor.js"],"names":["colorPicker","name","display","add","core","targetElement","addModule","context","fontColor","previewEl","colorInput","colorList","listDiv","setSubmenu","querySelector","addEventListener","onChangeInput","bind","submit","remove","pickup","querySelectorAll","initMenuTarget","colorArea","colorListHTML","util","createElement","className","innerHTML","on","contextPicker","contextFontColor","_colorInput","color","wwComputedStyle","_defaultColor","plugins","isHexColor","rgb2hex","_styleProperty","_colorList","init","call","getSelectionNode","e","setCurrentColor","target","value","applyColor","_currentColor","preventDefault","stopPropagation","getAttribute","nodeChange","submenuOff","newNode","style"],"mappings":"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","sourcesContent":["/*\r\n * wysiwyg web editor\r\n *\r\n * suneditor.js\r\n * Copyright 2017 JiHong Lee.\r\n * MIT license.\r\n */\r\n'use strict';\r\n\r\nimport colorPicker from '../modules/_colorPicker';\r\n\r\nexport default {\r\n    name: 'fontColor',\r\n    display: 'submenu',\r\n    add: function (core, targetElement) {\r\n        core.addModule([colorPicker]);\r\n\r\n        const context = core.context;\r\n        context.fontColor = {\r\n            previewEl: null,\r\n            colorInput: null,\r\n            colorList: null\r\n        };\r\n\r\n        /** set submenu */\r\n        let listDiv = this.setSubmenu(core);\r\n        context.fontColor.colorInput = listDiv.querySelector('._se_color_picker_input');\r\n\r\n        /** add event listeners */\r\n        context.fontColor.colorInput.addEventListener('keyup', this.onChangeInput.bind(core));\r\n        listDiv.querySelector('._se_color_picker_submit').addEventListener('click', this.submit.bind(core));\r\n        listDiv.querySelector('._se_color_picker_remove').addEventListener('click', this.remove.bind(core));\r\n        listDiv.addEventListener('click', this.pickup.bind(core));\r\n        context.fontColor.colorList = listDiv.querySelectorAll('li button');\r\n\r\n        /** append target button menu */\r\n        core.initMenuTarget(this.name, targetElement, listDiv);\r\n\r\n        /** empty memory */\r\n        listDiv = null;\r\n    },\r\n\r\n    setSubmenu: function (core) {\r\n        const colorArea = core.context.colorPicker.colorListHTML;\r\n        const listDiv = core.util.createElement('DIV');\r\n\r\n        listDiv.className = 'se-submenu se-list-layer';\r\n        listDiv.innerHTML = colorArea;\r\n\r\n        return listDiv;\r\n    },\r\n\r\n     /**\r\n     * @Override submenu\r\n     */\r\n    on: function () {\r\n        const contextPicker = this.context.colorPicker;\r\n        const contextFontColor = this.context.fontColor;\r\n\r\n        contextPicker._colorInput = contextFontColor.colorInput;\r\n        const color = this.wwComputedStyle.color;\r\n        contextPicker._defaultColor = color ? this.plugins.colorPicker.isHexColor(color) ? color : this.plugins.colorPicker.rgb2hex(color) : \"#333333\";\r\n        contextPicker._styleProperty = 'color';\r\n        contextPicker._colorList = contextFontColor.colorList;\r\n        \r\n        this.plugins.colorPicker.init.call(this, this.getSelectionNode(), null);\r\n    },\r\n\r\n     /**\r\n     * @Override _colorPicker\r\n     */\r\n    onChangeInput: function (e) {\r\n        this.plugins.colorPicker.setCurrentColor.call(this, e.target.value);\r\n    },\r\n\r\n    submit: function () {\r\n        this.plugins.fontColor.applyColor.call(this, this.context.colorPicker._currentColor);\r\n    },\r\n\r\n    pickup: function (e) {\r\n        e.preventDefault();\r\n        e.stopPropagation();\r\n\r\n        this.plugins.fontColor.applyColor.call(this, e.target.getAttribute('data-value'));\r\n    },\r\n\r\n    remove: function () {\r\n        this.nodeChange(null, ['color'], ['span'], true);\r\n        this.submenuOff();\r\n    },\r\n\r\n    applyColor: function (color) {\r\n        if (!color) return;\r\n\r\n        const newNode = this.util.createElement('SPAN');\r\n        newNode.style.color = color;\r\n        this.nodeChange(newNode, ['color'], null, null);\r\n\r\n        this.submenuOff();\r\n    }\r\n};\r\n"]},"metadata":{},"sourceType":"module"}